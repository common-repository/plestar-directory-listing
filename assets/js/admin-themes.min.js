jQuery(function($){$("#pdl-admin-page-themes-install #begin-theme-upload").prop("disabled",!0),$('#pdl-admin-page-themes-install input[name="themezip"]').change(function(e){var v=$(this).val();v&&$("#pdl-admin-page-themes-install #begin-theme-upload").prop("disabled",!1)}),$('#pdl-admin-page-themes .license-activation input[type="button"]').click(function(){var activate=$(this).is('[name="activate"]'),$form=$(this).parents(".license-activation"),$license=$('input[name="license"]',$form),$msg=$(".status-message",$form),data={nonce:$(this).attr("data-nonce"),theme:$(this).attr("data-theme")};activate?(data.action="pdl-themes-activate-license",data.license=$license.val()):data.action="pdl-themes-deactivate-license",$msg.removeClass("ok error"),$msg.html($(this).attr("data-l10n")),$.post(ajaxurl,data,function(res){return res.success?($msg.hide().html(res.message).removeClass("error").addClass("ok").show(),void(activate?($('input[name="activate"]',$form).hide(),$('input[name="deactivate"]',$form).show(),$license.prop("readonly",!0)):($license.prop("readonly",!1).val(""),$('input[name="deactivate"]',$form).hide(),$('input[name="activate"]',$form).show()))):void $msg.hide().html(res.error).removeClass("ok").addClass("error").show()},"json")}),$("#pdl-admin-page-themes .pdl-theme .update-link").click(function(e){e.preventDefault();var $theme=$(this).parents(".pdl-theme"),$info=$(".pdl-theme-update-info",$theme),$msg=$(".update-message",$info);$msg.html($info.attr("data-l10n-updating")),$.post(ajaxurl,{action:"pdl-themes-update",_wpnonce:$(this).attr("data-nonce"),theme:$(this).attr("data-theme-id")},function(res){if(!res.success)return $info.addClass("update-error"),void $msg.html(res.error);var $html=$(res.data.html);$(".pdl-theme-details-wrapper",$theme).replaceWith($(".pdl-theme-details-wrapper",$html)),$info.removeClass("update-available").addClass("theme-updated"),$msg.html($info.attr("data-l10n-updated"))},"json")})});